# Strands Multi-Agent Deep Search System

åŸºäºStrands Agents SDKå’ŒLangGraphçš„å¤šAgentæ·±åº¦æœç´¢ç³»ç»Ÿï¼Œæ”¯æŒå¤æ‚ä»»åŠ¡çš„æ™ºèƒ½åˆ†è§£å’Œåä½œæ‰§è¡Œã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å•Agentæ¨¡å¼ (simple_agent.py)
- ä¼ ç»Ÿçš„å•ä¸€ä»£ç†æ¨¡å¼
- é€‚åˆç®€å•æŸ¥è¯¢å’Œå¿«é€Ÿå“åº”
- é›†æˆMCPå·¥å…·å’ŒåŸºç¡€åŠŸèƒ½

### å¤šAgentæ¨¡å¼ (multi_agent.py) ğŸ†•
- åŸºäºStrands GraphBuilderçš„å›¾å½¢åŒ–å·¥ä½œæµå¤šAgentæ¶æ„
- **Task Analyzer Agent**: ä»»åŠ¡åˆ†æå’Œè®¡åˆ’åˆ¶å®š
- **Information Collector Agent**: ä¿¡æ¯æ”¶é›†å’Œèµ„æ–™æ•´ç†  
- **Tool Executor Agent**: å·¥å…·é€‰æ‹©å’Œæ‰§è¡Œæ“ä½œ
- **Result Analyzer Agent**: ç»“æœåˆ†æå’Œå®Œæˆåº¦åˆ¤æ–­
- **Answer Formatter Agent**: ç­”æ¡ˆæ ¼å¼åŒ–å’Œè¾“å‡ºè§„èŒƒ

## ğŸ¯ å¤šAgentç³»ç»Ÿç‰¹è‰²

- âœ… **GraphBuilderæ¶æ„**: ä½¿ç”¨Strands GraphBuilderæ„å»ºå›¾å½¢åŒ–å·¥ä½œæµ
- âœ… **æ™ºèƒ½åä½œ**: 5ä¸ªä¸“é—¨Agenté€šè¿‡å›¾å½¢åŒ–å·¥ä½œæµååŒå·¥ä½œ
- âœ… **ä»»åŠ¡åˆ†è§£**: è‡ªåŠ¨å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡
- âœ… **è¿­ä»£æ‰§è¡Œ**: æ”¯æŒå¤šè½®å·¥å…·æ‰§è¡Œï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆ
- âœ… **å·¥ä½œæµç¨‹**: å®Œå…¨å¯¹åº”å•Agentçš„å·¥ä½œæµç¨‹
- âœ… **æ ¼å¼åŒ–è¾“å‡º**: ä¸¥æ ¼æŒ‰ç…§è¦æ±‚æ ¼å¼åŒ–æœ€ç»ˆç­”æ¡ˆ
- âœ… **å›¾å½¢åŒ–æ‰§è¡Œ**: åŸºäºèŠ‚ç‚¹å’Œè¾¹çš„å·¥ä½œæµæ‰§è¡Œæ¨¡å¼

## ğŸ¯ é¡¹ç›®ç‰¹è‰²

- âœ… **ç®€æ´æ˜“ç”¨**: ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼Œç•Œé¢æ¸…çˆ½
- âœ… **è‡ªå®šä¹‰æç¤ºè¯**: æ”¯æŒä»»æ„ç³»ç»Ÿæç¤ºè¯å®šåˆ¶
- âœ… **MCPé›†æˆ**: æ”¯æŒModel Context Protocolå·¥å…·
- âœ… **è¯¦ç»†æ¨¡å¼**: å¯æŸ¥çœ‹å®Œæ•´æ‰§è¡Œè¿‡ç¨‹
- âœ… **å¤šç§å·¥å…·**: æ•°å­¦è®¡ç®—ã€æ–‡ä»¶æ“ä½œã€Pythonæ‰§è¡Œã€ç½‘ç»œè¯·æ±‚ç­‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ&å®‰è£…ä¾èµ–

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒ

å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„AWSå‡­è¯ï¼š
```bash
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_DEFAULT_REGION=us-east-1
```

### 3. è¿è¡Œç³»ç»Ÿ

**ç»Ÿä¸€å¯åŠ¨å™¨ (æ¨è):**
```bash
python3 run.py
```

**ç›´æ¥è¿è¡Œå„æ¨¡å¼:**
```bash
# å•Agentæ¨¡å¼
python3 simple_agent.py

# å¤šAgentä»»åŠ¡è§£å†³
python3 multi_agent.py

# ç³»ç»Ÿæµ‹è¯•
python3 test_multi_agent.py
```


## ğŸ’¡ é€‰æ‹©æ¨¡å¼
![alt text](image.png)
```bash
é€‰æ‹©æ¨¡å¼:
1. äº¤äº’æ¨¡å¼ 
2. å•æ¬¡é—®ç­” (æ¨è)
è¯·é€‰æ‹© (1-2): 
# æµ‹è¯•æ—¶æ¨èç›´æ¥å¡« â€˜2â€™ å³å¯
```

## ğŸ” è¯¦ç»†æ¨¡å¼

### ç®€æ´æ¨¡å¼ vs è¯¦ç»†æ¨¡å¼

**ç®€æ´æ¨¡å¼** (é»˜è®¤):
- åªæ˜¾ç¤ºæœ€ç»ˆå›ç­”
- é€‚åˆæ—¥å¸¸ä½¿ç”¨
- ç•Œé¢æ¸…çˆ½

**è¯¦ç»†æ¨¡å¼**:
- æ˜¾ç¤ºå·¥å…·è°ƒç”¨è¿‡ç¨‹
- æ˜¾ç¤ºAgentæ€è€ƒæ­¥éª¤
- é€‚åˆè°ƒè¯•å’Œå­¦ä¹ 

### å¯ç”¨è¯¦ç»†æ¨¡å¼

**å¯åŠ¨æ—¶é€‰æ‹©:**
```bash
python simple_agent.py
# é€‰æ‹© 'y' å¯ç”¨è¯¦ç»†æ¨¡å¼
```

**è¿è¡Œä¸­åˆ‡æ¢:**
```
ğŸ’¬ ä½ çš„é—®é¢˜: verbose
# è¾“å…¥ 'verbose' åˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼
```

### è¯¦ç»†æ¨¡å¼ç¤ºä¾‹
```
ğŸ¤– æ€è€ƒä¸­...
ğŸ”§ Tool Call: current_time()
ğŸ“¤ Tool Result: 2025-01-20 14:30:25 (Sunday)
ğŸ”§ Tool Call: calculator(expression="365-20")
ğŸ“¤ Tool Result: 345
ğŸ’­ Agentæ€è€ƒ: ç°åœ¨æˆ‘çŸ¥é“äº†å½“å‰æ—¶é—´å’Œè®¡ç®—ç»“æœ...
âœ… æœ€ç»ˆå›ç­”: ç°åœ¨æ˜¯2025å¹´1æœˆ20æ—¥14:30ï¼Œæ˜ŸæœŸæ—¥ã€‚è·ç¦»å¹´åº•è¿˜æœ‰345å¤©ã€‚
```

## ğŸ›ï¸ äº¤äº’å‘½ä»¤

åœ¨äº¤äº’æ¨¡å¼ä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

- `quit` - é€€å‡ºç¨‹åº
- `prompt` - ä¿®æ”¹ç³»ç»Ÿæç¤ºè¯
- `verbose` - åˆ‡æ¢è¯¦ç»†/ç®€æ´æ¨¡å¼
- `help` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

## ğŸ”Œ MCPé…ç½®

ç¼–è¾‘ `mcp_config.json` æ¥é…ç½®MCPæœåŠ¡å™¨ï¼š

```json
{
  "mcpServers": {
    "web-search": {
      "command": "npx",
      "args": ["-y", "@smithery/cli@latest", "run", "exa","--key"],
      "disabled": false
    },
    "sqlite": {
      "command": "uvx",
      "args": ["mcp-server-sqlite", "--db-path", "./data.db"],
      "disabled": true
    }
  }
}
```

## ğŸ¯ ä½¿ç”¨æŠ€å·§

### é—®é¢˜è®¾è®¡
- **å…·ä½“æ˜ç¡®**: "ç”¨Pythonåˆ†æCSVæ–‡ä»¶" æ¯” "åˆ†ææ•°æ®" æ›´å¥½
- **åŒ…å«ä¸Šä¸‹æ–‡**: æä¾›å¿…è¦çš„èƒŒæ™¯ä¿¡æ¯
- **æŒ‡å®šæ ¼å¼**: "ç”Ÿæˆè¡¨æ ¼"ã€"ç”»å›¾è¡¨"ã€"å†™ä»£ç "

### æç¤ºè¯ä¼˜åŒ–
- **æ˜ç¡®è§’è‰²**: å®šä¹‰ä¸“ä¸šèº«ä»½å’ŒæŠ€èƒ½
- **è¡Œä¸ºæŒ‡å¯¼**: è¯´æ˜æœŸæœ›çš„å·¥ä½œæ–¹å¼
- **è¾“å‡ºè¦æ±‚**: æŒ‡å®šå›ç­”æ ¼å¼å’Œè¯¦ç»†ç¨‹åº¦

### å·¥å…·ä½¿ç”¨
- **ç»„åˆä½¿ç”¨**: å¯ä»¥è¦æ±‚Agentä½¿ç”¨å¤šä¸ªå·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡
- **æ–‡ä»¶æ“ä½œ**: å…ˆåˆ›å»ºæ–‡ä»¶ï¼Œå†è¯»å–åˆ†æ
- **å›¾ç‰‡åˆ†æ**: æ”¯æŒåˆ†æå›¾ç‰‡å†…å®¹ã€è¯†åˆ«æ–‡å­—ã€æè¿°åœºæ™¯ç­‰
- **MCPå·¥å…·**: è·å–å®æ—¶ä¿¡æ¯å’Œä¸“ä¸šæ–‡æ¡£

### å›¾ç‰‡åˆ†æç¤ºä¾‹
```
é—®é¢˜: "åˆ†æè¿™å¼ å›¾ç‰‡ï¼Œå‘Šè¯‰æˆ‘å›¾ç‰‡ä¸­æœ‰ä»€ä¹ˆå†…å®¹"
ç³»ç»Ÿæç¤ºè¯: "ä½ æ˜¯å›¾åƒåˆ†æä¸“å®¶ï¼Œè¯·è¯¦ç»†æè¿°å›¾ç‰‡å†…å®¹ï¼ŒåŒ…æ‹¬ç‰©ä½“ã€åœºæ™¯ã€æ–‡å­—ç­‰ä¿¡æ¯ã€‚"

# Agentä¼šè‡ªåŠ¨ä½¿ç”¨image_readerå·¥å…·åˆ†æå›¾ç‰‡
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: MCPå·¥å…·è¿æ¥å¤±è´¥ï¼Ÿ**
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
# éªŒè¯APIå¯†é’¥
# ç¡®è®¤MCPæœåŠ¡å™¨é…ç½®æ­£ç¡®
```

**Q: Pythonä»£ç æ‰§è¡Œé”™è¯¯ï¼Ÿ**
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡è®¾ç½®
export PYTHON_REPL_INTERACTIVE=False
```

**Q: æ–‡ä»¶æ“ä½œæƒé™é—®é¢˜ï¼Ÿ**
```bash
# æ£€æŸ¥ç›®å½•æƒé™
chmod 755 .
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```python
# åœ¨simple_agent.pyå¼€å¤´ä¿®æ”¹
logging.basicConfig(level=logging.DEBUG)
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æå‡é€Ÿåº¦
- ç²¾ç®€ç³»ç»Ÿæç¤ºè¯
- æ˜ç¡®å…·ä½“é—®é¢˜
- åˆç†é€‰æ‹©å·¥å…·

### æ§åˆ¶æˆæœ¬
- ç›‘æ§Tokenä½¿ç”¨é‡
- é¿å…é‡å¤æŸ¥è¯¢
- ä¼˜åŒ–æç¤ºè¯é•¿åº¦

## ğŸ‰ å¼€å§‹ä½¿ç”¨

1. **å®‰è£…ä¾èµ–**: `pip install strands-agents strands-agents-tools mcp`
2. **é…ç½®ç¯å¢ƒ**: ç¼–è¾‘ `.env` æ–‡ä»¶
3. **å¯åŠ¨ç¨‹åº**: `python simple_agent.py`
4. **é€‰æ‹©æ¨¡å¼**: äº¤äº’æ¨¡å¼æˆ–å•æ¬¡é—®ç­”
5. **å¼€å§‹å¯¹è¯**: è¾“å…¥é—®é¢˜å’Œè‡ªå®šä¹‰æç¤ºè¯

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

---

**äº«å—ä¸AIä»£ç†çš„æ™ºèƒ½å¯¹è¯å§ï¼** ğŸš€

## ğŸ”„ GraphBuilderå¤šAgentå·¥ä½œæµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·ä»»åŠ¡] --> B[task_analyzer]
    B --> C[information_collector]
    C --> D[tool_executor]
    D --> E[result_analyzer]
    E --> F{ä»»åŠ¡å®Œæˆ?}
    F -->|å¦| D
    F -->|æ˜¯| G[answer_formatter]
    G --> H[<answer>æ ¼å¼åŒ–ç­”æ¡ˆ</answer>]
    
    subgraph "GraphBuilderå·¥ä½œæµ"
        B
        C
        D
        E
        G
    end
```

## ğŸ¯ å¤šAgentä½¿ç”¨åœºæ™¯

### é€‚åˆå¤šAgentæ¨¡å¼çš„ä»»åŠ¡:
- **å¤æ‚è®¡ç®—**: "è®¡ç®—å¤åˆå‡½æ•°çš„å¯¼æ•°å¹¶ç»˜åˆ¶å›¾åƒ"
- **æ•°æ®åˆ†æ**: "åˆ†æCSVæ–‡ä»¶ä¸­çš„é”€å”®æ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š"
- **ä¿¡æ¯æŸ¥è¯¢**: "æœç´¢æœ€æ–°çš„AIæŠ€æœ¯å‘å±•å¹¶æ€»ç»“è¦ç‚¹"
- **å¤šæ­¥éª¤ä»»åŠ¡**: "åˆ›å»ºä¸€ä¸ªPythonç¨‹åºï¼Œè¯»å–æ–‡ä»¶ï¼Œå¤„ç†æ•°æ®ï¼Œç”Ÿæˆå›¾è¡¨"

### é€‚åˆå•Agentæ¨¡å¼çš„ä»»åŠ¡:
- **ç®€å•é—®ç­”**: "ä»€ä¹ˆæ˜¯Dockerå®¹å™¨?"
- **ä»£ç ç”Ÿæˆ**: "å†™ä¸€ä¸ªPythonæ’åºç®—æ³•"
- **å¿«é€Ÿè®¡ç®—**: "è®¡ç®— 2 + 3 * 4"
- **æ–‡æ¡£è§£æ**: "åˆ†æè¿™ä¸ªå›¾ç‰‡å†…å®¹"

## ğŸ”§ é…ç½®æ–‡ä»¶

### multi_agent_config.json
```json
{
  "system_config": {
    "max_iterations": 10,
    "timeout_seconds": 300
  },
  "agent_config": {
    "search": {
      "max_results_per_query": 10,
      "enable_deep_search": true
    },
    "analysis": {
      "analysis_depth": "comprehensive",
      "enable_visualization": true
    }
  }
}
```